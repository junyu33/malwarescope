#!/bin/sh
# host_patch.sh <input> <output_folder>
if [ "$#" -ne 2 ]; then
    echo "Usage: host_patch.sh <input> <output_folder>"
    exit 1
fi
filename=$(basename $1)
echo "---------python3 patch.sh $1---------"
python3 patch.py $1
echo "---------running host_get_stacktrace.sh $1.patched $2/patch1.txt---------"
sh host_get_stacktrace.sh "$1.patched" "$2/$filename.patch.txt"
echo "---------running host_get_stacktrace.sh $1.patched1 $2/patch2.txt---------"
sh host_get_stacktrace.sh "$1.patched1" "$2/$filename.patch1.txt"
echo "---------running post_evaluate.py----------"
python3 post_evaluate.py $2/$filename.patch.txt > $2/$filename.patch.out
python3 post_evaluate.py $2/$filename.patch1.txt > $2/$filename.patch1.out
