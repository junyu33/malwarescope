import sys, os


with open('localization_sample', 'r') as file:
    lines_tmp4 = file.readlines()
    
with open('localization_lab', 'r') as file:
    lines_tmp3 = file.readlines()

ttp_count = {}
ttp_success = {}

# 检查每行是否有空格，并读取空格之前的内容
for line in lines_tmp4:
    filename = line.split(' ')[0]
    TTP = line.split(' ')[1]

    # clear \n
    TTP = TTP.replace('\n', '')
    # strip ['']
    if TTP[0] == '[':
        TTP = TTP[2:-2]

    flag = 0
    for line2check in lines_tmp3:
        if ' ' not in line2check:
            if filename in line2check:
                flag = 1
        else:
            if line in line2check:
                flag = 1

    if flag:
        if TTP in ttp_count:
            ttp_count[TTP] += 1
        else:
            ttp_count[TTP] = 1

        if TTP in ttp_success:
            ttp_success[TTP] += 1
        else:
            ttp_success[TTP] = 1
    else:
        if TTP in ttp_count:
            ttp_count[TTP] += 1
        else:
            ttp_count[TTP] = 1

print(ttp_count)
print(ttp_success)

for key in ttp_count.keys():
    if key in ttp_success:
        print(key, ttp_success[key], ttp_count[key], ttp_success[key]/ttp_count[key])
